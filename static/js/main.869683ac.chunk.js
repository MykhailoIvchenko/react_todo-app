(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n.n(r),a=(n(16),n(17),n(18),n(11)),u=n(3),o=n(4),s=n(1),i=n.n(s),l=n(2),d=n(5),p=n.n(d),f=n(0),b=function(e){var t=e.handleSubmit,n=Object(l.useState)(""),r=Object(o.a)(n,2),c=r[0],a=r[1];return Object(f.jsx)("form",{onSubmit:function(e){t(e,c),a("")},children:Object(f.jsx)("input",{value:c,type:"text",className:"new-todo",placeholder:"What needs to be done?",onChange:function(e){return a(e.target.value)}})})},j=n(6),h=function(e){var t,n=e.todo,r=e.index,c=e.editTodoTitle,a=e.editCompletedStatus,u=Object(l.useState)(!1),s=Object(o.a)(u,2),i=s[0],d=s[1],b=Object(l.useState)(n.title),h=Object(o.a)(b,2),m=h[0],x=h[1],O=Object(l.useState)(m),v=Object(o.a)(O,2),g=v[0],k=v[1],w=Object(l.useRef)(null),y=p()({completed:n.completed&&!i,editing:i}),C=p()((t={},Object(j.a)(t,"toggle-view".concat(r),!n.completed&&!i),Object(j.a)(t,"toggle-completed",n.completed&&!i),Object(j.a)(t,"toggle-editing",i),t));return Object(f.jsxs)("li",{className:y,children:[Object(f.jsxs)("div",{className:"view",children:[Object(f.jsx)("input",{type:"checkbox",className:"toggle",id:C,onChange:function(){return a(!n.completed,n.id)},checked:n.completed}),Object(f.jsx)("label",{htmlFor:C,onClick:function(e){return e.preventDefault()},onDoubleClick:function(){d(!0),k(m),setTimeout((function(){var e;null===(e=w.current)||void 0===e||e.focus()}),0)},children:n.title}),Object(f.jsx)("button",{type:"button","data-cy":"deleteTodo",className:"destroy",onClick:function(){return c("",n.id)}})]}),Object(f.jsx)("input",{value:m,ref:w,type:"text",className:"edit",onChange:function(e){return x(e.target.value)},onKeyDown:function(e){return function(e){if("Escape"===e.key)return d(!1),void x(n.title);"Enter"===e.key&&(g!==m&&(k(m),c(m,n.id)),d(!1))}(e)},onBlur:function(){g!==m&&c(m,n.id),d(!1)}})]})},m=function(e){var t=e.items,n=e.editTodoTitle,r=e.editCompletedStatus;return Object(f.jsx)("ul",{className:"todo-list",children:t.map((function(e,t){return Object(f.jsx)(h,{todo:e,index:t,editTodoTitle:n,editCompletedStatus:r},e.id)}))})},x=function(e){var t=e.todos.filter((function(e){return!1===e.completed})).length;return Object(f.jsx)("span",{"data-cy":"todosCounter",className:"todo-count",children:"".concat(t," ").concat(1===t?"item":"items"," left")})},O=function(e){var t=e.applyFilter,n="all",r="active",c="completed",a=Object(l.useState)(n),u=Object(o.a)(a,2),s=u[0],i=u[1],d=function(e){i(e),t(e)};return Object(f.jsxs)("ul",{className:"filters",children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"#/",className:s===n?"selected":"",onClick:function(){return d(n)},children:"All"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"#/active",className:s===r?"selected":"",onClick:function(){return d(r)},children:"Active"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"#/completed",className:s===c?"selected":"",onClick:function(){return d(c)},children:"Completed"})})]})},v=function(e){var t=e.completedTodosLength,n=e.handleClearCompletedClick,r=p()({"clear-completed":!0,hidden:0===t});return Object(f.jsx)("button",{type:"button",className:r,onClick:n,children:"Clear completed"})},g=function(e){var t=e.toggleAllStatus,n=e.handleToggleAllClick;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{type:"checkbox","data-cy":"toggleAll",id:"toggle-all",className:"toggle-all",checked:t,onClick:n}),Object(f.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"})]})},k="https://mate.academy/students-api",w=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,fetch("".concat(k).concat(t),n);case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,fetch("".concat(k).concat(t));case 8:r=e.sent;case 9:if(r.ok){e.next=11;break}throw new Error("".concat(r.status," - ").concat(r.statusText));case 11:return e.abrupt("return",r.json());case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){return w("/users/".concat(e))},C=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("/todos/?userId=".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:t,userId:n,completed:r})},e.prev=1,e.next=4,w("/todos",c);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(Object(j.a)({},n,r))},e.prev=1,e.next=4,w("/todos/".concat(t),c);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("/todos/".concat(t),{method:"DELETE"});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.useState)(3542),t=Object(o.a)(e,1)[0],n=Object(l.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],d=Object(l.useState)(!1),j=Object(o.a)(d,2),h=j[0],k=j[1],w=Object(l.useState)("all"),A=Object(o.a)(w,2),E=A[0],F=A[1],D=Object(l.useState)(""),P=Object(o.a)(D,2),J=P[0],L=P[1],I=Object(l.useState)(!1),U=Object(o.a)(I,2),B=U[0],_=U[1],H=p()({main:!0,hidden:0===c.length}),K=p()({footer:!0,hidden:0===c.length}),M=p()({error:!0,hidden:!B}),R=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t);case 3:n=e.sent,L(n.name),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),L("User loading failed");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:n=e.sent,s(Object(a.a)(n)),n.length>0?0===n.filter((function(e){return!e.completed})).length&&k(!0):k(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,n,r);case 2:return(c=e.sent)||(_(!0),setTimeout((function(){return _(!1)}),3e3)),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return(n=e.sent)||(_(!0),setTimeout((function(){return _(!1)}),3e3)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(n,"completed",t.toString());case 2:return e.next=4,W();case 4:c.find((function(e){return!1===e.completed}))||k(!0),h&&k(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=h,e.next=!1===e.t0?3:7;break;case 3:return t=c.map((function(e){return e.completed?"":q(e.id,"completed","true")})),e.next=6,Promise.all(t.filter((function(e){return""!==e})));case 6:return e.abrupt("break",11);case 7:return n=c.map((function(e){return q(e.id,"completed","false")})),e.next=10,Promise.all(n);case 10:return e.abrupt("break",11);case 11:k((function(e){return!e})),W();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(i.a.mark((function e(n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,S(r,t,!1);case 5:W();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.filter((function(e){return e.completed})),n=t.map((function(e){return z(e.id)})),e.next=4,Promise.all(n);case 4:W();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,z(n);case 3:e.next=7;break;case 5:return e.next=7,q(n,"title",t);case 7:W();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){R(),W()}),[]),Object(f.jsxs)("section",{className:"todoapp",children:[Object(f.jsx)("div",{className:M,children:"Something went wrong with server connection"}),Object(f.jsxs)("header",{className:"header",children:[Object(f.jsx)("h1",{children:"".concat(J," todos")}),Object(f.jsx)(b,{"data-cy":"createTodo",handleSubmit:V})]}),Object(f.jsxs)("section",{className:H,children:[Object(f.jsx)(g,{toggleAllStatus:h,handleToggleAllClick:Q}),Object(f.jsx)(m,{"data-cy":"todoList",items:function(){switch(E){case"active":return c.filter((function(e){return!1===e.completed}));case"completed":return c.filter((function(e){return!0===e.completed}));default:return c}}(),editTodoTitle:Y,editCompletedStatus:G})]}),Object(f.jsxs)("footer",{className:K,children:[Object(f.jsx)(x,{"data-cy":"todosCounter",todos:c}),Object(f.jsx)(O,{applyFilter:function(e){switch(e){case"active":F("active");break;case"completed":F("completed");break;default:F("all")}}}),Object(f.jsx)(v,{completedTodosLength:c.filter((function(e){return e.completed})).length,handleClearCompletedClick:function(){X(),0===c.filter((function(e){return!e.completed})).length&&k((function(e){return!e}))}})]})]})};c.a.render(Object(f.jsx)(A,{}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.869683ac.chunk.js.map