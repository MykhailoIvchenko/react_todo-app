(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r,c=n(10),a=n.n(c),u=(n(16),n(17),n(18),n(11)),o=n(3),s=n(4),i=n(1),l=n.n(i),d=n(2),p=n(5),f=n.n(p);!function(e){e.All="all",e.Active="active",e.Completed="completed"}(r||(r={}));var b=r,j=n(0),h=function(e){var t=e.handleSubmit,n=Object(d.useState)(""),r=Object(s.a)(n,2),c=r[0],a=r[1];return Object(j.jsx)("form",{onSubmit:function(e){t(e,c),a("")},children:Object(j.jsx)("input",{value:c,type:"text",className:"new-todo",placeholder:"What needs to be done?",onChange:function(e){return a(e.target.value)}})})},m=n(6),v=function(e){var t,n=e.todo,r=e.index,c=e.editTodoTitle,a=e.editCompletedStatus,u=Object(d.useState)(!1),o=Object(s.a)(u,2),i=o[0],l=o[1],p=Object(d.useState)(n.title),b=Object(s.a)(p,2),h=b[0],v=b[1],x=Object(d.useState)(h),O=Object(s.a)(x,2),g=O[0],k=O[1],w=Object(d.useRef)(null),y=f()({completed:n.completed&&!i,editing:i}),C=f()((t={},Object(m.a)(t,"toggle-view".concat(r),!n.completed&&!i),Object(m.a)(t,"toggle-completed",n.completed&&!i),Object(m.a)(t,"toggle-editing",i),t));return Object(j.jsxs)("li",{className:y,children:[Object(j.jsxs)("div",{className:"view",children:[Object(j.jsx)("input",{type:"checkbox",className:"toggle",id:C,onChange:function(){return a(!n.completed,n.id)},checked:n.completed}),Object(j.jsx)("label",{htmlFor:C,onClick:function(e){return e.preventDefault()},onDoubleClick:function(){l(!0),k(h),setTimeout((function(){var e;null===(e=w.current)||void 0===e||e.focus()}),0)},children:n.title}),Object(j.jsx)("button",{type:"button","data-cy":"deleteTodo",className:"destroy",onClick:function(){return c("",n.id)}})]}),Object(j.jsx)("input",{value:h,ref:w,type:"text",className:"edit",onChange:function(e){return v(e.target.value)},onKeyDown:function(e){return function(e){if("Escape"===e.key)return l(!1),void v(n.title);"Enter"===e.key&&(g!==h&&(k(h),c(h,n.id)),l(!1))}(e)},onBlur:function(){g!==h&&c(h,n.id),l(!1)}})]})},x=function(e){var t=e.items,n=e.editTodoTitle,r=e.editCompletedStatus;return Object(j.jsx)("ul",{className:"todo-list",children:t.map((function(e,t){return Object(j.jsx)(v,{todo:e,index:t,editTodoTitle:n,editCompletedStatus:r},e.id)}))})},O=function(e){var t=e.todos.filter((function(e){return!1===e.completed})).length;return Object(j.jsx)("span",{"data-cy":"todosCounter",className:"todo-count",children:"".concat(t," ").concat(1===t?"item":"items"," left")})},g=function(e){var t=e.applyFilter,n=Object(d.useState)(b.All),r=Object(s.a)(n,2),c=r[0],a=r[1],u=function(e){a(e),t(e)};return Object(j.jsxs)("ul",{className:"filters",children:[Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"#/",className:c===b.All?"selected":"",onClick:function(){return u(b.All)},children:"All"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"#/active",className:c===b.Active?"selected":"",onClick:function(){return u(b.Active)},children:"Active"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"#/completed",className:c===b.Completed?"selected":"",onClick:function(){return u(b.Completed)},children:"Completed"})})]})},k=function(e){var t=e.completedTodosLength,n=e.handleClearCompletedClick,r=f()({"clear-completed":!0,hidden:0===t});return Object(j.jsx)("button",{type:"button",className:r,onClick:n,children:"Clear completed"})},w=function(e){var t=e.toggleAllStatus,n=e.handleToggleAllClick;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"checkbox","data-cy":"toggleAll",id:"toggle-all",className:"toggle-all",checked:t,onClick:n}),Object(j.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"})]})},y="https://mate.academy/students-api",C=function(){var e=Object(o.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,fetch("".concat(y).concat(t),n);case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,fetch("".concat(y).concat(t));case 8:r=e.sent;case 9:if(r.ok){e.next=11;break}throw new Error("".concat(r.status," - ").concat(r.statusText));case 11:return e.abrupt("return",r.json());case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e){return C("/users/".concat(e))},T=function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/todos/?userId=".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(o.a)(l.a.mark((function e(t,n,r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:t,userId:n,completed:r})},e.prev=1,e.next=4,C("/todos",c);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(l.a.mark((function e(t,n,r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(Object(m.a)({},n,r))},e.prev=1,e.next=4,C("/todos/".concat(t),c);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/todos/".concat(t),{method:"DELETE"});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.useState)(3542),t=Object(s.a)(e,1)[0],n=Object(d.useState)([]),r=Object(s.a)(n,2),c=r[0],a=r[1],i=Object(d.useState)(!1),p=Object(s.a)(i,2),m=p[0],v=p[1],y=Object(d.useState)(b.All),C=Object(s.a)(y,2),F=C[0],D=C[1],P=Object(d.useState)(""),J=Object(s.a)(P,2),L=J[0],I=J[1],U=Object(d.useState)(!1),B=Object(s.a)(U,2),_=B[0],H=B[1],K=f()("main",{hidden:0===c.length}),M=f()("footer",{hidden:0===c.length}),R=f()("error",{hidden:!_}),W=function(){var e=Object(o.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(t);case 3:n=e.sent,I(n.name),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I("User loading failed");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:n=e.sent,a(Object(u.a)(n)),n.length>0?0===n.filter((function(e){return!e.completed})).length&&v(!0):v(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(l.a.mark((function e(t,n,r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n,r);case 2:return(c=e.sent)||(H(!0),setTimeout((function(){return H(!1)}),3e3)),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return(n=e.sent)||(H(!0),setTimeout((function(){return H(!1)}),3e3)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(o.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n,"completed",t.toString());case 2:return e.next=4,q();case 4:c.find((function(e){return!1===e.completed}))||v(!0),m&&v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=m,e.next=!1===e.t0?3:7;break;case 3:return t=c.map((function(e){return e.completed?"":z(e.id,"completed","true")})),e.next=6,Promise.all(t.filter((function(e){return""!==e})));case 6:return e.abrupt("break",11);case 7:return n=c.map((function(e){return z(e.id,"completed","false")})),e.next=10,Promise.all(n);case 10:return e.abrupt("break",11);case 11:v((function(e){return!e})),q();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(o.a)(l.a.mark((function e(n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N(r,t,!1);case 5:q();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.filter((function(e){return e.completed})),n=t.map((function(e){return G(e.id)})),e.next=4,Promise.all(n);case 4:q();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(o.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,G(n);case 3:e.next=7;break;case 5:return e.next=7,z(n,"title",t);case 7:q();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){W(),q()}),[]),Object(j.jsxs)("section",{className:"todoapp",children:[Object(j.jsx)("div",{className:R,children:"Something went wrong with server connection"}),Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("h1",{children:"".concat(L," todos")}),Object(j.jsx)(h,{"data-cy":"createTodo",handleSubmit:X})]}),Object(j.jsxs)("section",{className:K,children:[Object(j.jsx)(w,{toggleAllStatus:m,handleToggleAllClick:V}),Object(j.jsx)(x,{"data-cy":"todoList",items:function(){switch(F){case"active":return c.filter((function(e){return!1===e.completed}));case"completed":return c.filter((function(e){return!0===e.completed}));default:return c}}(),editTodoTitle:Z,editCompletedStatus:Q})]}),Object(j.jsxs)("footer",{className:M,children:[Object(j.jsx)(O,{"data-cy":"todosCounter",todos:c}),Object(j.jsx)(g,{applyFilter:function(e){switch(e){case b.Active:D(b.Active);break;case b.Completed:D(b.Completed);break;default:D(b.All)}}}),Object(j.jsx)(k,{completedTodosLength:c.filter((function(e){return e.completed})).length,handleClearCompletedClick:function(){Y(),0===c.filter((function(e){return!e.completed})).length&&v((function(e){return!e}))}})]})]})};a.a.render(Object(j.jsx)(F,{}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.22063ec6.chunk.js.map